"use strict";(self.webpackChunkHES_Vayu=self.webpackChunkHES_Vayu||[]).push([[21],{1908:(e,t,n)=>{n.d(t,{A:()=>B});var r=n(5043),a=n(279),l=n(6446),o=n(9650),i=n(3336),s=n(1806),d=n(4882),c=n(8076),u=n(9652),x=n(1962),h=n(8093),m=n(7392),p=n(3460),b=n(3193),f=n(9285),j=n(2143),A=n(5865),g=n(9135),v=n(378),C=n(9190),y=n(7784),k=n(1906),S=n(2505),w=n(6164),W=n(8082),R=n(579);const B=e=>{let{rows:t,columns:n,handleStatusChange:B=(e,t)=>{}}=e;const[I,M]=(0,r.useState)(1),[T,z]=(0,r.useState)([]),[E,F]=(0,r.useState)(null),[L,N]=(0,r.useState)(null),[O,U]=(0,r.useState)("asc"),[V,P]=(0,r.useState)({}),[$,D]=(0,r.useState)(null),[G,H]=(0,r.useState)(null),[_,q]=(0,r.useState)(""),[X,Q]=(0,r.useState)("contains"),[J,K]=(0,r.useState)(0),[Y,Z]=(0,r.useState)(10),ee=(0,r.useMemo)((()=>{let e=[...t];return Object.entries(V).forEach((t=>{let[n,r]=t;e=e.filter((e=>{var t;return null===(t=e[n])||void 0===t?void 0:t.toString().toLowerCase().includes(r.value.toLowerCase())}))})),L&&e.sort(((e,t)=>{const n=e[L],r=t[L];return n<r?"asc"===O?-1:1:n>r?"asc"===O?1:-1:0})),e}),[t,L,O,V]),[te,ne]=((0,r.useMemo)((()=>L?[...ee].sort(((e,t)=>{const n=e[L],r=t[L];return n<r?"asc"===O?-1:1:n>r?"asc"===O?1:-1:0})):ee),[ee,L,O]),(0,r.useState)(10)),re=t.slice(J*Y,(J+1)*Y);return(0,R.jsxs)(l.A,{children:[(0,R.jsxs)(l.A,{sx:{position:"relative"},children:[(0,R.jsx)(o.A,{component:i.A,elevation:3,sx:{maxHeight:500,overflow:"auto",borderRadius:0,border:"1px solid black",position:"relative","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#bbb",borderRadius:"4px"}},children:(0,R.jsxs)(s.A,{stickyHeader:!0,sx:{minWidth:1e3},children:[(0,R.jsx)(d.A,{children:(0,R.jsxs)(c.A,{sx:{backgroundColor:"#e0f2fe",boxShadow:"inset 0 -1px 0 rgba(0, 0, 0, 0.1)"},children:[(0,R.jsx)(u.A,{sx:{backgroundColor:"#e0f2fe"}}),(0,R.jsx)(u.A,{padding:"checkbox",sx:{backgroundColor:"#e0f2fe",borderBottom:"1px solid #bae6fd"},children:(0,R.jsx)(x.A,{checked:T.length===t.length,indeterminate:T.length>0&&T.length<t.length,onChange:e=>z(e.target.checked?t.map((e=>e.id)):[]),sx:{color:"#0284c7","&.Mui-checked":{color:"#0284c7"},"&.MuiCheckbox-indeterminate":{color:"#0284c7"}}})}),n.map((e=>"id"===e.field?null:(0,R.jsx)(u.A,{sx:{fontWeight:700,textTransform:"capitalize",backgroundColor:"#e0f2fe",color:"#0f172a",fontSize:"0.9rem",letterSpacing:"0.02em",borderBottom:"1px solid #bae6fd"},children:(0,R.jsxs)(l.A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,R.jsx)(h.A,{active:L===e.field,direction:L===e.field?O:"asc",onClick:()=>{return t=e.field,void(L===t?U((e=>"asc"===e?"desc":"asc")):(N(t),U("asc")));var t},sx:{"& .MuiTableSortLabel-icon":{color:"#38bdf8"},"&.Mui-active .MuiTableSortLabel-icon":{color:"#0284c7"}},children:e.headerName}),(0,R.jsx)(m.A,{size:"small",onClick:t=>((e,t)=>{D(e.currentTarget),H(t);const n=V[t];q(n?n.value:""),Q(n?n.type:"contains")})(t,e.field),sx:{ml:1,color:"#0284c7","&:hover":{color:"#0369a1"}},children:(0,R.jsx)(W.A,{fontSize:"small"})})]})},e.field)))]})}),(0,R.jsx)(p.A,{children:re.map(((e,t)=>(0,R.jsxs)(r.Fragment,{children:[(0,R.jsxs)(c.A,{hover:!0,sx:{backgroundColor:t%2===0?"#ffffff":"#f6f8fa",transition:"background-color 0.3s"},children:[(0,R.jsx)(u.A,{children:(0,R.jsx)(m.A,{size:"small",onClick:()=>F(E===e.id?null:e.id),children:E===e.id?(0,R.jsx)(w.A,{}):(0,R.jsx)(S.A,{})})}),(0,R.jsx)(u.A,{padding:"checkbox",children:(0,R.jsx)(x.A,{checked:T.includes(e.id),onChange:()=>{return t=e.id,void z((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}})}),n.map((t=>{var n;return"status"===t.field?(0,R.jsx)(u.A,{children:(0,R.jsx)(b.A,{size:"small",fullWidth:!0,children:(0,R.jsxs)(f.A,{value:null!==(n=e.status)&&void 0!==n?n:"Inactive",onChange:t=>B(e.id,t.target.value),sx:{fontSize:"0.85rem",fontWeight:600,borderRadius:"0px",color:"Active"===e.status?"#16a34a":"#dc2626",backgroundColor:"Active"===e.status?"#dcfce7":"#fee2e2",height:"32px"},children:[(0,R.jsx)(j.A,{value:"Active",children:"Active"}),(0,R.jsx)(j.A,{value:"Inactive",children:"Inactive"})]})})},`${e.id}-status`):"id"===t.field?null:(0,R.jsx)(u.A,{children:e[t.field]},`${e.id}-${t.field}`)}))]},e.id),E===e.id&&(0,R.jsx)(c.A,{children:(0,R.jsx)(u.A,{colSpan:n.length+2,sx:{p:0},children:(0,R.jsx)(a.A,{in:!0,timeout:"auto",unmountOnExit:!0,children:(0,R.jsx)(l.A,{sx:{p:2,bgcolor:"#f0f4f8",borderRadius:1},children:(0,R.jsxs)(A.A,{variant:"body2",children:["Nested details for"," ",(0,R.jsx)("b",{children:e.name||`Row ${e.id}`})]})})})})})]},e.id)))})]})}),(0,R.jsxs)(i.A,{elevation:2,sx:{mt:1,px:1,py:1,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0},children:[(0,R.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(A.A,{variant:"body2",sx:{mr:2},children:"Rows per page:"}),(0,R.jsx)(b.A,{size:"small",children:(0,R.jsx)(f.A,{sx:{borderRadius:0},value:Y,onChange:e=>{Z(parseInt(e.target.value,10)),K(0)},children:[10,20,50,100].map((e=>(0,R.jsx)(j.A,{sx:{borderRadius:0,"&.MuiMenuItem-root":{borderRadius:0}},value:e,children:e},e)))})})]}),(0,R.jsx)(g.A,{count:Math.ceil(t.length/Y),page:J+1,onChange:(e,t)=>K(t-1),color:"primary",shape:"rounded",showFirstButton:!0,showLastButton:!0,siblingCount:0,boundaryCount:1,sx:{"& .MuiPaginationItem-root":{borderRadius:0}}})]})]}),(0,R.jsxs)(v.A,{anchorEl:$,open:Boolean($),onClose:()=>D(null),PaperProps:{style:{width:"300px",padding:"10px"}},children:[(0,R.jsx)(j.A,{children:(0,R.jsxs)(b.A,{fullWidth:!0,children:[(0,R.jsx)(C.A,{sx:{fontWeight:600},children:"Filter Type"}),(0,R.jsxs)(f.A,{value:X,onChange:e=>{Q(e.target.value)},label:"Filter Type",sx:{borderRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#1773be"}},children:[(0,R.jsx)(j.A,{value:"contains",children:"Contains"}),(0,R.jsx)(j.A,{value:"startsWith",children:"Starts With"}),(0,R.jsx)(j.A,{value:"endsWith",children:"Ends With"}),(0,R.jsx)(j.A,{value:"equals",children:"Equals"}),(0,R.jsx)(j.A,{value:"greaterThan",children:"Greater Than"}),(0,R.jsx)(j.A,{value:"lessThan",children:"Less Than"})]})]})}),(0,R.jsx)(j.A,{children:(0,R.jsx)(y.A,{label:"Filter Value",variant:"outlined",value:_,onChange:()=>{var e,t;e=X,t=_,P((n=>{var r;return{...n,[e]:{value:t,type:(null===(r=n[e])||void 0===r?void 0:r.type)||"contains"}}}))},fullWidth:!0,sx:{mt:1,"& .MuiInputLabel-root":{fontWeight:600},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#1773be"}}})}),(0,R.jsx)(l.A,{display:"flex",justifyContent:"flex-end",mt:2,mr:2,children:(0,R.jsx)(k.A,{variant:"contained",onClick:()=>{G&&(P((e=>({...e,[G]:{value:_,type:X}}))),D(null))},sx:{padding:"4px 16px",borderRadius:"0px",backgroundColor:"#1773ba",color:"white","&:hover":{backgroundColor:"#1773ba"}},children:"Apply"})})]})]})}},3996:(e,t,n)=>{n.d(t,{s:()=>v});var r=n(5043),a=n(6240),l=n(35),o=n(6600),i=n(5316),s=n(5865),d=n(8903),c=n(2110),u=n(6446),x=n(1906),h=n(9347),m=n(5502),p=n(6765),b=n(8789),f=n(8811),j=n(9380),A=n(4176),g=n(579);const v=e=>{let{title:t,open:n,onClose:v,onBulkUpload:C}=e;const y=(0,a.A)(),[k,S]=(0,r.useState)(null),[w,W]=(0,r.useState)(!1),{getRootProps:R,getInputProps:B}=(0,b.VB)({accept:{"application/vnd.ms-excel":[".xls",".xlsx"],"text/csv":[".csv"]},maxSize:104857600,onDrop:e=>{const t=e[0];S(t)}});return(0,g.jsxs)(l.A,{open:n,onClose:()=>{S(null),v()},PaperProps:{sx:{borderRadius:"16px",padding:2,backgroundColor:y.palette.background.paper,boxShadow:y.shadows[5]}},children:["`"," ",(0,g.jsx)(o.A,{sx:{fontFamily:"GT Walsheim Pro, sans-serif",fontWeight:600,fontSize:"1.25rem",textAlign:"center",pb:1},children:t}),"`",(0,g.jsxs)(i.A,{sx:{pt:0,minWidth:{xs:300,md:500}},children:[(0,g.jsx)(s.A,{sx:{color:"grey.700"},variant:"body2",textAlign:"center",children:"You can upload file via drag and drop or by clicking the upload button."}),(0,g.jsxs)(d.Ay,{item:!0,xs:12,md:6,children:[(0,g.jsxs)(c.A,{variant:"outlined",sx:{p:3,mt:2,textAlign:"center",borderStyle:"dashed",borderColor:"#1773BE",backgroundColor:"#ECF4FA",display:"flex",flexDirection:"column",alignItems:"center"},...R(),children:[(0,g.jsx)("input",{...B()}),k?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[k.name.endsWith(".csv")?(0,g.jsx)(j.A,{sx:{fontSize:40,color:"#1773BE"}}):(0,g.jsx)(A.A,{sx:{fontSize:40,color:"#1773BE"}}),(0,g.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{wordBreak:"break-word",mt:1},children:k.name})]}),(0,g.jsxs)(u.A,{sx:{display:"flex",gap:2},children:[(0,g.jsx)(x.A,{variant:"outlined",size:"small",sx:{textTransform:"none",color:"#1773BE",borderColor:"#1773BE"},onClick:e=>{e.stopPropagation();const t=URL.createObjectURL(k);window.open(t,"_blank")},children:"View"}),(0,g.jsx)(x.A,{variant:"contained",size:"small",sx:{textTransform:"none",backgroundColor:"#1773BE"},onClick:e=>{R()},children:"Replace"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:1},children:[(0,g.jsx)(f.vR,{sx:{paddingRight:"8px"}}),(0,g.jsx)(s.A,{color:"primary",fontWeight:"bold",sx:{color:"#1773BE",pl:1},children:"Upload file"})]}),(0,g.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{marginBottom:1},children:["Max file size: 100MB",(0,g.jsx)("br",{}),"Supported formats: CSV, XLSX"]})]})]}),!k&&(0,g.jsxs)(u.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:2,children:[(0,g.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"File should contain Meter ID, Meter Number and Command"}),(0,g.jsx)(x.A,{variant:"text",size:"small",sx:{color:"#1773BE",textTransform:"none","&:hover":{textDecoration:"underline"},pr:2},onClick:async()=>{const e=await fetch("https://present-blue-antlion.myfilebase.com/ipfs/QmSF1xjA2auTh1qPzST69J1QX1nF8Vbysa6UjVdx6TWw43");if(e.ok){const t=await e.blob(),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="sample-file",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("Failed to fetch file")},children:"Download Sample"})]})]})]}),(0,g.jsxs)(h.A,{sx:{justifyContent:"space-between",px:2.5,pb:2,mt:1,alignItems:"center"},children:[(0,g.jsx)(x.A,{onClick:v,variant:"outlined",color:"error",startIcon:(0,g.jsx)(m.A,{}),sx:{borderRadius:1,textTransform:"none",px:4},children:"Cancel"}),(0,g.jsx)(x.A,{onClick:C,variant:"outlined",startIcon:(0,g.jsx)(p.A,{}),sx:{background:`linear-gradient(to right, ${y.palette.primary.light}, ${y.palette.primary.main}, ${y.palette.primary.dark})`,color:"#fff",borderRadius:1,px:4,textTransform:"none","&:hover":{background:`linear-gradient(to right, ${y.palette.primary.dark}, ${y.palette.primary.main})`}},children:"Submit"})]})]})}},7021:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(5043),a=n(6446),l=n(5865),o=n(1906),i=n(1908),s=n(8218),d=n(3996),c=n(579);const u=Array.from({length:665}).map(((e,t)=>({id:t+1,meterNumber:"AKL028625"+t%10,commandType:"GetDailyLoadProfile",commandValue:"2025-03-07",meterStatus:"Expired",syncStatus:"Cancelled",createdOn:"28/03/2025 05:08 PM",userGroup:"Group 1",groupCode:"CR-68C50F"})));function x(){const[e,t]=(0,r.useState)(null),[n,x]=(0,r.useState)({page:1,pageSize:10}),h=[{field:"id",headerName:"ID",minWidth:70},{field:"meterNumber",headerName:"Meter Number",minWidth:150},{field:"commandType",headerName:"Command Type",minWidth:180},{field:"commandValue",headerName:"Command Value",minWidth:150},{field:"meterStatus",headerName:"Status",minWidth:100},{field:"syncStatus",headerName:"Sync Status",minWidth:130},{field:"createdOn",headerName:"Created On",minWidth:180},{field:"userGroup",headerName:"User Group",minWidth:120},{field:"groupCode",headerName:"Group Code",minWidth:150}],[m,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)("");return(0,c.jsxs)(a.A,{children:[(0,c.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mb:2,mt:6,children:[(0,c.jsx)(l.A,{variant:"h6"}),(0,c.jsxs)(a.A,{children:[(0,c.jsx)(o.A,{variant:"outlined",color:"error",sx:{mr:2,borderWidth:1},onClick:()=>{f("Bulk Cancel Commands"),p(!0)},children:"Bulk Cancel Commands"}),(0,c.jsx)(o.A,{variant:"outlined",color:"success",sx:{borderWidth:1},onClick:()=>{f("Bulk Upload Commands"),p(!0)},children:"Bulk Upload Commands"}),(0,c.jsx)(d.s,{title:b,open:m,onClose:()=>{p(!1)},onBulkUpload:e=>{console.log("Bulk Upload File: ",e)}})]})]}),(0,c.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,c.jsx)(l.A,{variant:"h6"}),(0,c.jsx)(o.A,{variant:"outlined",size:"small",startIcon:(0,c.jsx)(s.A,{}),onClick:()=>{const e=h.map((e=>e.headerName)).join(","),t=u.map((e=>h.map((t=>e[t.field])).join(","))).join("\n"),n=new Blob([`${e}\n${t}`],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","table_data.csv"),a.click()},children:"Export CSV"})]}),(0,c.jsx)(i.A,{rows:u,columns:h})]})}},8218:(e,t,n)=>{var r=n(4994);t.A=void 0;var a=r(n(39)),l=n(579),o=(0,a.default)((0,l.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"FileDownload");t.A=o}}]);
//# sourceMappingURL=21.d80e34e6.chunk.js.map